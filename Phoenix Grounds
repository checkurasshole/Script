local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
    Name = "ComboChronicle Vault | Updates Might Come",
    Icon = 12345678901, --  diamond icon ID? 
    LoadingTitle = "Loading ComboChronicle Vault ‚ùñ",
    LoadingSubtitle = "By COMBO_WICK | Bang.E.Line",
    Theme = "Ocean"
})

-- Toggles

-- Store death and kill position variables
local teleportDistance = 10  -- Distance in front of the local player to teleport others
local teleporting = false  -- Toggle for continuous teleportation
local checkInterval = 0.5  -- Time between teleportation checks (reduce this value if you need faster checks)

local espEnabled = false  -- Toggle for ESP

-- Helper function to check if a player is a teammate
local function isTeammate(player)
    local localPlayer = game.Players.LocalPlayer
    return player.Team == localPlayer.Team
end

-- Function to teleport to a specified position
local function teleportToPosition(position)
    local player = game.Players.LocalPlayer
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = CFrame.new(position)
    end
end


-- ESP Logic
local function addESP(character)
    if character and character:FindFirstChild("Head") then
        if not character:FindFirstChild("ESP_Highlight") then
            local highlight = Instance.new("Highlight")
            highlight.Name = "ESP_Highlight"
            highlight.Adornee = character
            highlight.FillColor = Color3.new(0, 1, 0) -- Green color
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            highlight.Parent = character
        end
    end
end

local function removeESP(character)
    local highlight = character:FindFirstChild("ESP_Highlight")
    if highlight then
        highlight:Destroy()
    end
end

-- Function to track players and apply ESP on respawn
local function monitorPlayerESP(player)
    if player ~= game.Players.LocalPlayer then
        if player.Character then
            addESP(player.Character)
        end
        -- Listen for respawn and apply ESP again
        player.CharacterAdded:Connect(function(character)
            task.wait(0.5) -- Small delay to ensure the character fully loads
            addESP(character)
        end)
    end
end

-- Apply ESP to existing players and listen for new ones
for _, player in pairs(game.Players:GetPlayers()) do
    monitorPlayerESP(player)
end

-- Listen for new players joining the game
game.Players.PlayerAdded:Connect(monitorPlayerESP)

-- Function to teleport players(TEAMATE VERSION)
local function teleportMovingPlayers()
    local localPlayer = game.Players.LocalPlayer
    local character = localPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local rootPart = character.HumanoidRootPart
        local camera = workspace.CurrentCamera
        local cameraDirection = camera.CFrame.LookVector
        local cameraPosition = camera.CFrame.Position
        
        -- Loop through all players and teleport them if they're moving and not on the same team
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Character and player ~= localPlayer and player.Team ~= localPlayer.Team then
                local targetCharacter = player.Character
                local humanoid = targetCharacter:FindFirstChild("Humanoid")
                local targetRootPart = targetCharacter:FindFirstChild("HumanoidRootPart")
                
                -- Ensure the player has a humanoid and is moving
                if targetRootPart and humanoid and humanoid.MoveDirection.magnitude > 0 then
                    -- Calculate the new position directly in front of the local player
                    local newPosition = cameraPosition + cameraDirection * teleportDistance
                    
                    -- Use Raycast to check and correct the Y position (for grounding)
                    local ray = Ray.new(newPosition, Vector3.new(0, -10, 0))  -- Check downwards for ground
                    local hit, hitPosition = workspace:FindPartOnRay(ray, targetCharacter)
                    
                    -- Set the new position of the player
                    if hit then
                        targetRootPart.CFrame = CFrame.new(hitPosition.X, hitPosition.Y, hitPosition.Z)
                    else
                        -- Default position if no ground found
                        targetRootPart.CFrame = CFrame.new(newPosition)
                    end
                    
                    -- Remove any BodyGyros or other constraints that may interfere with player interaction
                    for _, v in pairs(targetCharacter:GetChildren()) do
                        if v:IsA("BodyGyro") or v:IsA("BodyPosition") then
                            v:Destroy()
                        end
                    end

                    -- Prevent them from being teleported back to their original position
                    targetCharacter:MoveTo(hitPosition or newPosition)
                    
                    -- Anchor the player to prevent floating
                    targetRootPart.Anchored = true
                    
                    -- Allow the player to interact (e.g., get damaged or killed) after teleporting
                    if humanoid then
                        humanoid.PlatformStand = false  -- Ensure the humanoid is not locked in place
                    end

                    -- Ensure collision is enabled for the player after teleportation
                    humanoid:ChangeState(Enum.HumanoidStateType.Physics)
                end
            end
        end
    end
end

-- Function to teleport players(FREE-FOR-ALL)
local function teleportMovingPlayers2()
    local localPlayer = game.Players.LocalPlayer
    local character = localPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local rootPart = character.HumanoidRootPart
        local camera = workspace.CurrentCamera
        local cameraDirection = camera.CFrame.LookVector
        local cameraPosition = camera.CFrame.Position
        
        -- Loop through all players and teleport them if they're moving
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Character and player ~= localPlayer then
                local targetCharacter = player.Character
                local humanoid = targetCharacter:FindFirstChild("Humanoid")
                local targetRootPart = targetCharacter:FindFirstChild("HumanoidRootPart")
                
                -- Ensure the player has a humanoid and is moving
                if targetRootPart and humanoid and humanoid.MoveDirection.magnitude > 0 then
                    -- Calculate the new position directly in front of the local player
                    local newPosition = cameraPosition + cameraDirection * teleportDistance
                    
                    -- Use Raycast to check and correct the Y position (for grounding)
                    local ray = Ray.new(newPosition, Vector3.new(0, -10, 0))  -- Check downwards for ground
                    local hit, hitPosition = workspace:FindPartOnRay(ray, targetCharacter)
                    
                    -- Set the new position of the player
                    if hit then
                        targetRootPart.CFrame = CFrame.new(hitPosition.X, hitPosition.Y, hitPosition.Z)
                    else
                        -- Default position if no ground found
                        targetRootPart.CFrame = CFrame.new(newPosition)
                    end
                    
                    -- Remove any BodyGyros or other constraints that may interfere with player interaction
                    for _, v in pairs(targetCharacter:GetChildren()) do
                        if v:IsA("BodyGyro") or v:IsA("BodyPosition") then
                            v:Destroy()
                        end
                    end

                    -- Prevent them from being teleported back to their original position
                    targetCharacter:MoveTo(hitPosition or newPosition)
                    
                    -- Anchor the player to prevent floating
                    targetRootPart.Anchored = true
                    
                    -- Allow the player to interact (e.g., get damaged or killed) after teleporting
                    if humanoid then
                        humanoid.PlatformStand = false  -- Ensure the humanoid is not locked in place
                    end

                    -- Ensure collision is enabled for the player after teleportation
                    humanoid:ChangeState(Enum.HumanoidStateType.Physics)
                end
            end
        end
    end
end

-- Create Main Tab
local mainTab = Window:CreateTab("Main - Updates might come", 4483362458)

-- Teleport Toggle
mainTab:CreateToggle({
    Name = "Kill All(TeamMates Game Mode)",
    CurrentValue = teleporting,
    Callback = function(value)
        teleporting = value
        if teleporting then
            -- Start teleportation checks with a delay
            while teleporting do
                teleportMovingPlayers()
                wait(checkInterval)  -- Reduced check frequency
            end
        end
    end,
})

-- Teleport Toggle
mainTab:CreateToggle({
    Name = "Kill All(FREE-FOR-ALL GAME MODE)",
    CurrentValue = teleporting,
    Callback = function(value)
        teleporting = value
        if teleporting then
            -- Start teleportation checks with a delay
            while teleporting do
                teleportMovingPlayers2()
                wait(checkInterval)  -- Reduced check frequency
            end
        end
    end,
})

-- ESP Toggle
mainTab:CreateToggle({
    Name = "Toggle ESP(Do it MANUALLY lmao)",
    CurrentValue = espEnabled,
    Callback = function(value)
        espEnabled = value
        -- Enable or disable ESP for all players
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Character then
                if espEnabled then
                    addESP(player.Character)
                else
                    removeESP(player.Character)
                end
            end
            player.CharacterAdded:Connect(function(character)
                if espEnabled then
                    addESP(character)
                else
                    removeESP(character)
                end
            end)
        end
    end
})

-- Hitbox Toggle
mainTab:CreateToggle({
    Name = "Enable Hitbox",
    CurrentValue = false, -- Default is off
    Callback = function(value)
        hitboxEnabled = value
        if hitboxEnabled then
            for _, player in pairs(game.Players:GetPlayers()) do
                if not isTeammate(player) and player.Character then
                    adjustHitbox(player.Character)
                end
            end
        else
            for _, player in pairs(game.Players:GetPlayers()) do
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local rootPart = player.Character.HumanoidRootPart
                    rootPart.Size = Vector3.new(2, 2, 1) -- Reset to default size
                    rootPart.Transparency = 0 -- Reset visibility
                    rootPart.CanCollide = true -- Enable collisions
                end
            end
        end
    end
})

-- Credits Tab
local CreditsTab = Window:CreateTab("‚ú® Credits", "info")
local CreatorSection = CreditsTab:CreateSection("üëë Creator")
CreditsTab:CreateLabel("üõ†Ô∏è COMBO_WICK - Discord: world_star_hacker")
local CoDevSection = CreditsTab:CreateSection("ü§ù Co-Developer")
CreditsTab:CreateLabel("üí° None - Discord: None")
local DiscordSection = CreditsTab:CreateSection("üåê Discord Server")
CreditsTab:CreateLabel("üîó Join our server: discord.com/invite/mwTHaCKzhw")
CreditsTab:CreateButton({
   Name = "üìã Copy Discord Link/Youtube",
   Callback = function()
      local links = "Discord: discord.com/invite/mwTHaCKzhw\nYouTube: https://www.youtube.com/@COMBO_WICK"
      setclipboard(links)
   end,
})

-- GUI Elements
local MainTab = Window:CreateTab("Aimbot+", 12345678)

-- Continuously check for any missed players or characters for ESP
task.spawn(function()
    while task.wait(1) do
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Character then
                if espEnabled then
                    addESP(player.Character)
                else
                    removeESP(player.Character)
                end
            end
        end
    end
end)

-- Continuously monitor for teleportation
game:GetService("RunService").Heartbeat:Connect(function()
    if teleporting then
        teleportMovingPlayers()
    end
end)

 
