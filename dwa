local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Fetch the key from Pastebin
local keyURL = "https://pastebin.com/raw/ZWFwRjBJ"
local success, response = pcall(function()
    return game:HttpGet(keyURL)
end)
local validKey = success and response or "default_key" -- Fallback if fetch fails

-- Define the IQ test questions and correct answers
local iqQuestions = {
    { question = "What is 5 + 3?", answer = "8" },
    { question = "Spell 'cat' backwards.", answer = "tac" },
    { question = "What is 2 x 6?", answer = "12" }
}

local playerAnswers = {}
local keyEntered = false

-- Function to load the main script once the IQ test is passed
local function loadMainScript()
    local success, err = pcall(function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Prov4'))()
    end)
    
    if not success then
        warn("Error loading script: " .. err)
    end
end

-- Function to kick the player if they fail the IQ test or key check
local function kickPlayer(reason)
    local kickMessages = {
        key = "Wrong key, you absolute **brain-dead** moron. \n\nYou can‚Äôt even copy-paste correctly? Your existence is a glitch in the matrix. \n\nGo drool somewhere else, you waste of carbon. üö™",
        iq = "Congrats on failing the most basic IQ test, you **oxygen-stealing** clown ü§°. \n\nCouldn't answer 'What is 5 + 3?'‚Äînow you're a **breathing disappointment**. Every time you think, a brain cell commits suicide out of embarrassment. \n\nNASA just confirmed: you‚Äôre the reason aliens refuse to visit Earth.  \n\nYou proved why birth control exists. üö™ Now get the fuck out. üíÄ"
    }
    game.Players.LocalPlayer:Kick(kickMessages[reason] or "Get lost, loser.")
end

-- GUI Setup
local Window = Rayfield:CreateWindow({
    Name = "ComboChronicle Vault | IQ Test Loader",
    LoadingTitle = "Loading ComboChronicle Vault ‚ùñ",
    LoadingSubtitle = "By COMBO_WICK | Bang.E.Line",
    Theme = "Ocean"
})

-- Key Tab
local KeyTab = Window:CreateTab("Key Verification", 4483362458)
KeyTab:CreateInput({
    Name = "Enter Key",
    PlaceholderText = "Paste the key here...",
    RemoveTextAfterFocusLost = false,
    Callback = function(input)
        if input == validKey then
            keyEntered = true
            Rayfield:Notify({
                Title = "‚úÖ Key Accepted",
                Content = "Key verified! Proceed to the IQ test.",
                Duration = 3,
                Image = 4483362458
            })
        else
            Rayfield:Notify({
                Title = "‚ùå Invalid Key",
                Content = "Wrong key, dipshit. Try again or get lost.",
                Duration = 5,
                Image = 4483362458
            })
            wait(5)
            kickPlayer("key")
        end
    end
})

-- IQ Test Tab
local IQTestTab = Window:CreateTab("IQ Test", 4483362458)

-- Function to check if all answers are correct
local function checkAnswers()
    if not keyEntered then
        Rayfield:Notify({
            Title = "‚ùå Access Denied",
            Content = "Enter the correct key first, you illiterate fuck.",
            Duration = 5,
            Image = 4483362458
        })
        return
    end
    
    for i, q in ipairs(iqQuestions) do
        if playerAnswers[i] ~= q.answer then
            Rayfield:Notify({
                Title = "‚ùå Incorrect Answer",
                Content = "Are you seriously failing this? Get ready faggot.",
                Duration = 5,
                Image = 4483362458
            })
            wait(5)
            kickPlayer("iq")
            return
        end
    end
    
    Rayfield:Destroy()
    print("Correct answers! Loading the script...")
    loadMainScript()
end

-- Create the IQ test inputs
for i, q in ipairs(iqQuestions) do
    IQTestTab:CreateInput({
        Name = q.question,
        PlaceholderText = "Type your answer here...",
        RemoveTextAfterFocusLost = false,
        Callback = function(input)
            playerAnswers[i] = input
            if #playerAnswers == #iqQuestions then
                checkAnswers()
            end
        end
    })
end
