-- Protected Script (French)
-- Script ID: b19a0be6dfc589db4e05646326c8a1ff
-- Created: 2025-10-27T03:13:22.005Z
-- Source: External API
-- Auto-generated by Lua Script Vault

local repo = "https://raw.githubusercontent.com/deividcomsono/Obsidian/main/"
local Library = loadstring(game:HttpGet(repo .. "Library.lua"))()
local ThemeManager = loadstring(game:HttpGet(repo .. "addons/ThemeManager.lua"))()
local SaveManager = loadstring(game:HttpGet(repo .. "addons/SaveManager.lua"))()

local Options = Library.Options
local Toggles = Library.Toggles

Library.ForceCheckbox = false
Library.ShowToggleFrameInKeybinds = true

local Window = Library:CreateWindow({
	Title = "_COMBO WICK",
	Footer = "by mspaint",
	Icon = "rbxassetid://10723407389",
	NotifySide = "Right",
	ShowCustomCursor = true,
	Size = UDim2.new(0, 450, 0, 450),
	Position = UDim2.new(0.5, -225, 0.5, -225),
})

local Tabs = {
	Main = Window:AddTab("Ferme aux bonbons", "candy"),
	["UI Settings"] = Window:AddTab("Paramètres de l' UI", "settings"),
}

-- Teleport player on first execution
local Players = game:GetService("Players")
local player = Players.LocalPlayer

task.spawn(function()
	local char = player.Character or player.CharacterAdded:Wait()
	local hrp = char:WaitForChild("HumanoidRootPart")
	
	local targetCFrame = CFrame.new(
		5317.43701, 654.37561, -5962.54443,
		0.707942426, 0.0503890179, 0.704470336,
		0.0151684023, 0.996136844, -0.0864943638,
		-0.706107199, 0.0719187185, 0.704443216
	)
	
	hrp.CFrame = targetCFrame
	
	Library:Notify({
		Title = "Téléporté",
		Description = "Moved to farm location",
		Time = 3,
	})
end)

-- Load the CandyFarm module from GitHub
local CandyFarmModule
local moduleLoaded = false

local success, err = pcall(function()
	CandyFarmModule = loadstring(game:HttpGet("https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/candydealershiptycoonnss"))()
	moduleLoaded = true
end)

if not success then
	warn("Failed to load CandyFarm module:", err)
end

local Halloween2025 = workspace:WaitForChild("Halloween2025")
local Mazes = Halloween2025:WaitForChild("Mazes")

local MapConfigs = {
	{
		Name = "Très rapide",
		DisplayName = "Candy automatique le plus rapide",
		Maze = Mazes:WaitForChild("Cornfield2"),
		FastMode = true,
	},
	{
		Name = "Forteresse",
		DisplayName = "Forteresse",
		Maze = Mazes:WaitForChild("Castle1"),
	},
	{
		Name = "ScarecrowSprint",
		DisplayName = "Sprint de l'épouvantail",
		Maze = Mazes:WaitForChild("Cornfield1"),
	},
	{
		Name = "CimetièreGanteau",
		DisplayName = "Cimetière Gantelet",
		Maze = Mazes:WaitForChild("Castle2"),
	},
	{
		Name = "Voie de citrouille",
		DisplayName = "Chemin de la citrouille",
		Maze = Mazes:WaitForChild("Cornfield2"),
	},
}

local activeToggles = {}

local MainBox = Tabs.Main:AddLeftGroupbox("Candy Auto Farm")

if not moduleLoaded then
	MainBox:AddLabel("⚠️ Module failed to load!")
	MainBox:AddLabel("Check console for errors")
else
	MainBox:AddLabel("Select a map to farm:")
	MainBox:AddDivider()

	for i, mapConfig in ipairs(MapConfigs) do
		local toggleName = "Basculer" .. mapConfig.Name
		
		MainBox:AddToggle(toggleName, {
			Text = mapConfig.DisplayName,
			Default = false,
			Tooltip = "Exploitation agricole" .. mapConfig.Name,
		})
		
		Toggles[toggleName]:OnChanged(function()
			if Toggles[toggleName].Value then
				for otherName, _ in pairs(activeToggles) do
					if otherName ~= toggleName then
						Toggles[otherName]:SetValue(false)
					end
				end
				
				activeToggles[toggleName] = true
				
				Library:Notify({
					Title = "Démarré",
					Description = mapConfig.DisplayName,
					Time = 2,
				})
				
				task.spawn(function()
					if mapConfig.FastMode then
						CandyFarmModule.farmMapFast(mapConfig, toggleName, Toggles)
					else
						CandyFarmModule.farmMap(mapConfig, toggleName, Toggles)
					end
				end)
			else
				activeToggles[toggleName] = nil
				Library:Notify({
					Title = "Arrêts",
					Description = mapConfig.DisplayName,
					Time = 2,
				})
			end
		end)
	end
end

local MenuGroup = Tabs["UI Settings"]:AddLeftGroupbox("Menu")

MenuGroup:AddToggle("KeybindMenuOuvrir", {
	Default = Library.KeybindFrame.Visible,
	Text = "Ouvrir le menu Keybind",
	Callback = function(value)
		Library.KeybindFrame.Visible = value
	end,
})

MenuGroup:AddToggle("AfficherCurseurCustom", {
	Text = "Curseur personnalisé",
	Default = true,
	Callback = function(Value)
		Library.ShowCustomCursor = Value
	end,
})

MenuGroup:AddDropdown("NotificationSide", {
	Values = { "Left", "Right" },
	Default = "Right",
	Text = "Côté notification",
	Callback = function(Value)
		Library:SetNotifySide(Value)
	end,
})

MenuGroup:AddDivider()
MenuGroup:AddLabel("Menu bind"):AddKeyPicker("MenuKeybind", { Default = "RightShift", NoUI = true, Text = "Keybind du menu" })

MenuGroup:AddButton("Unload", function()
	Library:Unload()
end)

Library.ToggleKeybind = Options.MenuKeybind

ThemeManager:SetLibrary(Library)
SaveManager:SetLibrary(Library)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({ "MenuKeybind" })
ThemeManager:SetFolder("CandyFarm")
SaveManager:SetFolder("CandyFarm/configs")
SaveManager:BuildConfigSection(Tabs["UI Settings"])
ThemeManager:ApplyToTab(Tabs["UI Settings"])
SaveManager:LoadAutoloadConfig()